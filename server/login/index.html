<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Document</title>
		<style>
			.welcome {
				display: none;
			}
		</style>
		<link rel="stylesheet" href="../css/index.css">
	</head>
	<body>
		<header></header>
		<p class="head">鲜花速递网,鲜花预定,本地送花品牌鲜花店！全国送花热线：010-60777792/18511870338

			<span class="login"><a href="login.html">登录</a><a href="register.html">注册</a>

				<span>
					<a href="##" class="goCar">购物车</a>
					<span class="sc">心意商城</span>
					</apan>
				</span>
		</p>

		<div class="logo">
			<img class="false" src="https://www.xinyixianhua.com/resource/img/logo.png" alt="">
			<span>心意鲜花网全国送花城市鲜花1-3小时</span>
			<input type="text" class="txt">
			<input type="button" class="btn" value="搜索">
			<img class="false" src="https://www.xinyixianhua.com/resource/img/header-ad.jpg" alt="">
		</div>

		<main>
			<ul class="top" style="position: relative;">
				<li>所有产品</li>
				<li><a href="#">首页</a></li>
				<li><a href="#">所有鲜花</a></li>
				<li><a href="#">红玫瑰</a></li>
				<li><a href="#">生日鲜花</a></li>
				<li><a href="#">表白鲜花</a></li>
				<li><a href="#">鲜花花语</a></li>
				<li><a href="#">绿色植被</a></li>
			</ul>
			<div class = "hidden" style="display:none; position: absolute;background:rgba(22,233,43,.6);z-index: 999;" >
				<span>血港鬼影</span>
				<span>艾欧尼亚</span>
				<span>弗雷尔卓德</span>
				<span>德玛西亚</span><br>
				<span>诺克萨斯</span>
				<span>守望之海</span>
				<span>守望之海</span>
			</div>
			<ul class="btm">
				<li class="li">鲜花<br>
					<ul >
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>

						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
					</ul>
				</li>
				<li class="li">绿植<br>
					<ul>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
					</ul>
				</li>
				<li class="li">永生花<br>
					<ul>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>

						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
					</ul>
				</li>
				<li class="li">商务鲜花<br>
					<ul >
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>

						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
					</ul>
				</li>
				<li class="li">鲜花类别<br>
					<ul class = "false">
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>

						<li>
							<a href="#">爱情鲜花</a>
						</li>
						<li>
							<a href="#">爱情鲜花</a>
						</li>
					</ul>
				</li>
			</ul>
			<div class="banner"></div>
		</main>
		
		<!-- //floor -->
		<div class="floor">
			<div class="container">
				
				<div class="f1 ">
					<p><img class="true" src="../images/index_pic1.jpg" alt=""></p>
				</div>
				<div class="f2 ">
					<p><img class="true" src="../images/index_pic2.jpg" alt=""></p>
				</div>
				<div class="f3 ">
					<p><img class="true" src="../images/index_pic3.jpg" alt=""></p>
				</div>
				<div class="f4 ">
					<p><img class="true" src="../images/index_pic4.jpg" alt=""></p>
				</div>
			</div>
		</div>
		
		<footer>
			<img class="false" src="../images/footer.PNG" alt="">
		</footer>

		<span class="welcome">欢迎尊贵的会员<span id="userName">XXX</span>，<a href="##">注销</a></span>

	</body>
	<script src="../js/jquery.js"></script>
	<script src="../js/jquery.banner.1.0.js"></script>
	<script src="../ajax.js"></script>
	<script src="../move.js"></script>
	<script src="../js/cookie.js"></script>
	<script>
		class Show{
			constructor(){
				this.ologin = document.querySelector(".login");
				this.owelcome = document.querySelector(".welcome");
				this.oGoCar = document.querySelector(".goCar");
				this.top = document.querySelector("main .top");
				this.imgs = document.querySelectorAll("img");
				this.floor = document.querySelector(".floor").children[0].children;
				this.url = "http://localhost/json/shujv.json";
				this.num = 0;
				this.length = 4;
				this.banner();
				this.ajax();
				this.addEvent();
			}
			banner(){
				$(".banner").banner({
				    img:["../images/1503038560503.jpg","../images/1503038464808.jpg","../images/1544263508883.jpg"]
				})
			}
			ajax(){
				var that = this;
				ajaxGet([this.url,this.url1][0],function(res){
					that.res = JSON.parse(res);
					that.display();
				})
			}
			
			addEvent(){
				var that = this;
				this.top.onmouseover = function(e){
					if(e.target.tagName === "LI"){
						e.target.parentNode.nextElementSibling.style.display = "block";
						e.target.parentNode.nextElementSibling.style.left = e.target.offsetLeft+"px"
						e.target.onmouseleave = function(){
							e.target.parentNode.nextElementSibling.style.display = "none";
						}
					}
				}
				this.top.nextElementSibling.onmouseover = function(){
					this.style.display = "block";
				}
				this.top.nextElementSibling.onmouseout = function(){
					this.style.display = "none";
				}
				document.onclick = function(e){
					if(e.target.className === "true" ){
						console.log(e.target.src)
						console.log(e.target.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML)
						// setCookie("product",'{"img":"' + e.target.src + '","price":'+ e.target.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML + '}');
						setCookie("product",`{"img": ${e.target.src},"price":${e.target.nextElementSibling.nextElementSibling.nextElementSibling.innerHTML}}`);
					}
				}
			}
			
			display(){
				var str = "";
				console.log(this.res[0].img)
				for(var j=0;j<4;j++){
				for(var i=this.num*this.length;i<this.num*this.length+this.length;i++){
					str += `<div class="box">
									<img class="true" src="${this.res[i].img}" alt="">
									<span>${this.res[i].name}</span><br>
									<span>${this.res[i].price}</span>
							</div>
						   `
				}
				this.floor[j].innerHTML = this.floor[j].innerHTML + str;
				if(i >= this.num*this.length+this.length){
					str = "";
				}
				this.num++;
			}
		}
			
		}
		
		
		
		
		
		
		
		
		
		
		
		new Show();


















		// 怎么判断是否登录？
	</script>
</html>
